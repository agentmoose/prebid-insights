<!DOCTYPE html><html class="default" lang="en"><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>prebid-integration-monitor</title><meta name="description" content="Documentation for prebid-integration-monitor"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script defer src="assets/main.js"></script><script async src="assets/icons.js" id="tsd-icons-script"></script><script async src="assets/search.js" id="tsd-search-script"></script><script async src="assets/navigation.js" id="tsd-nav-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><div class="table-cell" id="tsd-search" data-base="."><div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="assets/icons.svg#icon-search"></use></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div><div class="field"><div id="tsd-toolbar-links"></div></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">prebid-integration-monitor</a></div><div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="assets/icons.svg#icon-menu"></use></svg></a></div></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><h1>prebid-integration-monitor</h1></div><div class="tsd-panel tsd-typography"><a id="md:prebid-integration-monitor" class="tsd-anchor"></a><h1 class="tsd-anchor-link">prebid-integration-monitor<a href="#md:prebid-integration-monitor" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h1><p>This project is designed to monitor Prebid integrations. It is now built using TypeScript and uses Vitest for testing.</p>
<a id="md:prerequisites" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Prerequisites<a href="#md:prerequisites" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><ul>
<li>Node.js (v16 or later recommended)</li>
<li>npm (comes with Node.js)</li>
</ul>
<a id="md:setup" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Setup<a href="#md:setup" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><ol>
<li>
<p><strong>Clone the repository:</strong></p>
<pre><code class="bash"><span class="hl-0">git</span><span class="hl-1"> </span><span class="hl-2">clone</span><span class="hl-1"> </span><span class="hl-2">https://github.com/prebid/prebid-integration-monitor.git</span><br/><span class="hl-0">cd</span><span class="hl-1"> </span><span class="hl-2">prebid-integration-monitor</span>
</code><button type="button">Copy</button></pre>

</li>
<li>
<p><strong>Install dependencies:</strong></p>
<pre><code class="bash"><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">install</span>
</code><button type="button">Copy</button></pre>

</li>
</ol>
<a id="md:project-structure" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Project Structure<a href="#md:project-structure" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><ul>
<li><code>bin/</code>: Contains executable scripts for running the CLI.
<ul>
<li><code>dev.js</code>: Entry point for development mode (uses ts-node).</li>
<li><code>run.js</code>: Entry point for production mode (uses compiled JS).</li>
</ul>
</li>
<li><code>src/</code>: Contains the TypeScript source code for the application.
<ul>
<li><code>commands/</code>: Contains the oclif command classes.
<ul>
<li><code>index.ts</code>: The default command that runs when no specific command is provided. It now houses the main application logic.</li>
</ul>
</li>
<li><code>index.ts</code>: Previously the main entry point. Now, its role is superseded by the oclif structure in <code>bin/</code> and <code>src/commands/</code>.</li>
<li><code>cluster.cts</code>: Handles Puppeteer cluster setup (uses CommonTS syntax).</li>
<li><code>utils/</code>: Utility scripts.</li>
<li>Other <code>.ts</code> files for application logic.</li>
</ul>
</li>
<li><code>dist/</code>: Contains the compiled JavaScript code, generated by <code>npm run build</code>.
<ul>
<li><code>dist/commands/</code>: Contains compiled oclif commands.</li>
</ul>
</li>
<li><code>tests/</code>: Contains test files written using Vitest.
<ul>
<li><code>example.test.ts</code>: An example test file.</li>
</ul>
</li>
<li><code>package.json</code>: Lists project dependencies, npm scripts, and oclif configuration.</li>
<li><code>tsconfig.json</code>: Configuration file for the TypeScript compiler.</li>
<li><code>node_modules/</code>: Directory where npm installs project dependencies.</li>
</ul>
<a id="md:development" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Development<a href="#md:development" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>To run the application in development mode (using the oclif development script, which leverages <code>ts-node</code>):</p>
<pre><code class="bash"><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">run</span><span class="hl-1"> </span><span class="hl-2">dev</span>
</code><button type="button">Copy</button></pre>

<p>This executes <code>node ./bin/dev.js</code> which handles TypeScript execution.</p>
<a id="md:building-for-production" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Building for Production<a href="#md:building-for-production" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>To compile the TypeScript code to JavaScript (output will be in the <code>dist/</code> directory):</p>
<pre><code class="bash"><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">run</span><span class="hl-1"> </span><span class="hl-2">build</span>
</code><button type="button">Copy</button></pre>

<p><strong>Note on <code>tsc</code> execution:</strong> In some environments, if <code>tsc</code> (the TypeScript compiler) is not found via the npm script, you might need to invoke it using <code>npx</code>:</p>
<pre><code class="bash"><span class="hl-0">npx</span><span class="hl-1"> </span><span class="hl-3">-p</span><span class="hl-1"> </span><span class="hl-2">typescript</span><span class="hl-1"> </span><span class="hl-2">tsc</span>
</code><button type="button">Copy</button></pre>

<p>This command typically isn't needed if <code>npm run build</code> works, as <code>npm run build</code> should use the <code>tsc</code> from your project's <code>devDependencies</code>. The type checking can also be done using <code>npm run build:check</code> or <code>npx -p typescript tsc --noEmit --module nodenext --moduleResolution nodenext src/**/*.ts src/cluster.cts</code>.</p>
<a id="md:running-in-production" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Running in Production<a href="#md:running-in-production" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>After building the project (<code>npm run build</code>), run the compiled application using its oclif entry point:</p>
<pre><code class="bash"><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">start</span>
</code><button type="button">Copy</button></pre>

<p>This executes <code>node ./bin/run.js</code>.</p>
<a id="md:cli-usage-oclif" class="tsd-anchor"></a><h2 class="tsd-anchor-link">CLI Usage (oclif)<a href="#md:cli-usage-oclif" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>This application is now structured as an oclif (Open CLI Framework) command-line interface.</p>
<ul>
<li>
<p><strong>Running commands:</strong></p>
<ul>
<li>In development: <code>node ./bin/dev.js [COMMAND] [FLAGS]</code></li>
<li>In production (after <code>npm run build</code>): <code>node ./bin/run.js [COMMAND] [FLAGS]</code></li>
<li>If the package is linked globally (<code>npm link</code>) or installed globally, you can use the bin name directly: <code>app [COMMAND] [FLAGS]</code> (Note: <code>app</code> is the default bin name configured in <code>package.json</code>).</li>
</ul>
</li>
<li>
<p><strong>Default Command:</strong></p>
<ul>
<li>Running <code>node ./bin/run.js</code> (or <code>node ./bin/dev.js</code>) without any specific command will execute the default command defined in <code>src/commands/index.ts</code>. This command currently runs the main prebid integration monitoring logic.</li>
</ul>
</li>
<li>
<p><strong>Getting Help:</strong></p>
<ul>
<li>To see general help for the CLI and a list of available commands:<pre><code class="bash"><span class="hl-0">node</span><span class="hl-1"> </span><span class="hl-2">./bin/run.js</span><span class="hl-1"> </span><span class="hl-3">--help</span>
</code><button type="button">Copy</button></pre>

or in development:<pre><code class="bash"><span class="hl-0">node</span><span class="hl-1"> </span><span class="hl-2">./bin/dev.js</span><span class="hl-1"> </span><span class="hl-3">--help</span>
</code><button type="button">Copy</button></pre>

</li>
<li>For help on a specific command:<pre><code class="bash"><span class="hl-0">node</span><span class="hl-1"> </span><span class="hl-2">./bin/run.js</span><span class="hl-1"> [COMMAND] --help</span>
</code><button type="button">Copy</button></pre>

</li>
</ul>
</li>
</ul>
<a id="md:scan-command" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><code>scan</code> Command<a href="#md:scan-command" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>The <code>scan</code> command is used to analyze a list of websites for Prebid.js integrations and other specified ad technology libraries. It processes URLs from an input file, launches Puppeteer instances to visit these pages, and collects data, saving the results to an output directory.</p>
<p><strong>Syntax:</strong></p>
<pre><code class="bash"><span class="hl-0">./bin/run</span><span class="hl-1"> </span><span class="hl-2">scan</span><span class="hl-1"> [INPUTFILE] [FLAGS...]</span><br/><span class="hl-4"># or in development: node ./bin/dev.js scan [INPUTFILE] [FLAGS...]</span><br/><span class="hl-4"># or using npm script: npm run prebid:scan -- [INPUTFILE] [FLAGS...] (note the -- to pass arguments to the script)</span>
</code><button type="button">Copy</button></pre>

<p><strong>Argument:</strong></p>
<ul>
<li><code>INPUTFILE</code>: (Optional) Path to a local input file containing URLs.
<ul>
<li>Accepts <code>.txt</code> (one URL per line), <code>.csv</code> (URLs in the first column), or <code>.json</code> (extracts all string values that are URLs) files.</li>
<li>This argument is required if <code>--githubRepo</code> is not used.</li>
<li>If <code>--githubRepo</code> is provided, <code>INPUTFILE</code> is ignored.</li>
<li>If neither <code>INPUTFILE</code> nor <code>--githubRepo</code> is specified, the command will show an error (unless the default <code>src/input.txt</code> exists and is readable).</li>
<li>Defaults to <code>src/input.txt</code> if no other source is specified.</li>
</ul>
</li>
</ul>
<p><strong>Flags:</strong></p>
<ul>
<li><code>--githubRepo &lt;URL&gt;</code>: Specifies a public GitHub URL from which to fetch URLs.
<ul>
<li>This can be a base repository URL (e.g., <code>https://github.com/owner/repo</code>) to scan for URLs within processable files (like <code>.txt</code>, <code>.json</code>, <code>.md</code>) in the repository root.</li>
<li>Alternatively, it can be a direct link to a specific processable file within a repository (e.g., <code>https://github.com/owner/repo/blob/main/some/path/file.txt</code>). In this case, only the specified file will be fetched and processed.</li>
<li>Example (repository): <code>--githubRepo https://github.com/owner/repo</code></li>
<li>Example (direct file): <code>--githubRepo https://github.com/owner/repo/blob/main/urls.txt</code></li>
</ul>
</li>
<li><code>--numUrls &lt;number&gt;</code>: When used with <code>--githubRepo</code>, this flag limits the number of URLs to be extracted and processed from the repository.
<ul>
<li>Default: <code>100</code></li>
<li>Example: <code>--numUrls 50</code></li>
</ul>
</li>
<li><code>--puppeteerType &lt;option&gt;</code>: Specifies the Puppeteer operational mode.
<ul>
<li>Options: <code>vanilla</code>, <code>cluster</code> (default)</li>
<li><code>vanilla</code>: Processes URLs sequentially using a single Puppeteer browser instance.</li>
<li><code>cluster</code>: Uses <code>puppeteer-cluster</code> to process URLs in parallel, according to the concurrency settings.</li>
</ul>
</li>
<li><code>--concurrency &lt;value&gt;</code>: Sets the number of concurrent Puppeteer instances when using <code>puppeteerType=cluster</code>.
<ul>
<li>Default: <code>5</code></li>
</ul>
</li>
<li><code>--headless</code>: Runs Puppeteer in headless mode (no UI). This is the default.
<ul>
<li><code>--no-headless</code>: Runs Puppeteer with a visible browser UI.</li>
</ul>
</li>
<li><code>--monitor</code>: Enables <code>puppeteer-cluster</code>'s web monitoring interface (available at <code>http://localhost:21337</code> by default) when <code>puppeteerType=cluster</code>.
<ul>
<li>Default: <code>false</code></li>
</ul>
</li>
<li><code>--outputDir &lt;value&gt;</code>: Specifies the directory where scan results (JSON files) will be saved.
<ul>
<li>Default: <code>output</code> (in the project root)</li>
<li>Results are typically saved in a subdirectory structure like <code>output/Month/YYYY-MM-DD.json</code>.</li>
</ul>
</li>
<li><code>--logDir &lt;value&gt;</code>: Specifies the directory where log files (<code>app.log</code>, <code>error.log</code>) will be saved.
<ul>
<li>Default: <code>logs</code> (in the project root)</li>
</ul>
</li>
<li><code>--range &lt;string&gt;</code>: Specify a line range (e.g., '10-20', '5-', '-15') to process from the input source (file, CSV, or GitHub-extracted URLs). Uses 1-based indexing. If the source is a GitHub repo, the range applies to the aggregated list of URLs extracted from all targeted files in the repo.
<ul>
<li>Example: <code>--range 10-50</code> or <code>--range 1-</code></li>
</ul>
</li>
<li><code>--chunkSize &lt;number&gt;</code>: Process URLs in chunks of this size. This processes all URLs (whether from the full input or a specified range) but does so by loading and analyzing only <code>chunkSize</code> URLs at a time. Useful for very large lists of URLs to manage resources or process incrementally.
<ul>
<li>Example: <code>--chunkSize 50</code></li>
</ul>
</li>
</ul>
<p><strong>Usage Examples:</strong></p>
<ol>
<li>
<p><strong>Basic scan (using default <code>input.txt</code> and cluster mode):</strong></p>
<pre><code class="bash"><span class="hl-0">./bin/run</span><span class="hl-1"> </span><span class="hl-2">scan</span>
</code><button type="button">Copy</button></pre>

<p><em>(Ensure <code>./bin/run</code> has execute permissions or use <code>node ./bin/run scan</code>)</em></p>
</li>
<li>
<p><strong>Scan using vanilla Puppeteer:</strong></p>
<pre><code class="bash"><span class="hl-0">./bin/run</span><span class="hl-1"> </span><span class="hl-2">scan</span><span class="hl-1"> </span><span class="hl-3">--puppeteerType=vanilla</span>
</code><button type="button">Copy</button></pre>

</li>
<li>
<p><strong>Scan with a specific input file and output directory:</strong></p>
<pre><code class="bash"><span class="hl-0">./bin/run</span><span class="hl-1"> </span><span class="hl-2">scan</span><span class="hl-1"> </span><span class="hl-2">my_urls.txt</span><span class="hl-1"> </span><span class="hl-3">--outputDir=./my_results</span>
</code><button type="button">Copy</button></pre>

</li>
<li>
<p><strong>Scan in non-headless (headed) mode:</strong></p>
<pre><code class="bash"><span class="hl-0">./bin/run</span><span class="hl-1"> </span><span class="hl-2">scan</span><span class="hl-1"> </span><span class="hl-3">--no-headless</span>
</code><button type="button">Copy</button></pre>

</li>
<li>
<p><strong>Scan with increased concurrency and monitoring for cluster mode:</strong></p>
<pre><code class="bash"><span class="hl-0">./bin/run</span><span class="hl-1"> </span><span class="hl-2">scan</span><span class="hl-1"> </span><span class="hl-3">--concurrency=10</span><span class="hl-1"> </span><span class="hl-3">--monitor</span>
</code><button type="button">Copy</button></pre>

</li>
<li>
<p><strong>Scan URLs from a GitHub repository:</strong></p>
<pre><code class="bash"><span class="hl-0">./bin/run</span><span class="hl-1"> </span><span class="hl-2">scan</span><span class="hl-1"> </span><span class="hl-3">--githubRepo</span><span class="hl-1"> </span><span class="hl-2">https://github.com/owner/repo</span>
</code><button type="button">Copy</button></pre>

</li>
<li>
<p><strong>Scan a limited number of URLs from a GitHub repository:</strong></p>
<pre><code class="bash"><span class="hl-0">./bin/run</span><span class="hl-1"> </span><span class="hl-2">scan</span><span class="hl-1"> </span><span class="hl-3">--githubRepo</span><span class="hl-1"> </span><span class="hl-2">https://github.com/owner/repo</span><span class="hl-1"> </span><span class="hl-3">--numUrls</span><span class="hl-1"> </span><span class="hl-5">50</span>
</code><button type="button">Copy</button></pre>

</li>
<li>
<p><strong>Scan URLs from a local CSV file (using INPUTFILE argument):</strong></p>
<pre><code class="bash"><span class="hl-0">./bin/run</span><span class="hl-1"> </span><span class="hl-2">scan</span><span class="hl-1"> </span><span class="hl-2">./data/urls_to_scan.csv</span>
</code><button type="button">Copy</button></pre>

</li>
<li>
<p><strong>Scan URLs from a local JSON file (using INPUTFILE argument):</strong></p>
<pre><code class="bash"><span class="hl-0">./bin/run</span><span class="hl-1"> </span><span class="hl-2">scan</span><span class="hl-1"> </span><span class="hl-2">./data/urls_to_scan.json</span>
</code><button type="button">Copy</button></pre>

</li>
<li>
<p><strong>Scan a specific range of URLs from a large input file, in chunks:</strong></p>
<pre><code class="bash"><span class="hl-0">./bin/run</span><span class="hl-1"> </span><span class="hl-2">scan</span><span class="hl-1"> </span><span class="hl-2">very_large_list_of_sites.txt</span><span class="hl-1"> </span><span class="hl-3">--range</span><span class="hl-1"> </span><span class="hl-2">1001-2000</span><span class="hl-1"> </span><span class="hl-3">--chunkSize</span><span class="hl-1"> </span><span class="hl-5">100</span>
</code><button type="button">Copy</button></pre>

</li>
</ol>
<a id="md:notes-on-url-extraction" class="tsd-anchor"></a><h4 class="tsd-anchor-link">Notes on URL Extraction<a href="#md:notes-on-url-extraction" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><ul>
<li>When processing <code>.txt</code> files (or GitHub files treated as text), the scanner looks for fully qualified URLs (e.g., <code>http://example.com</code>) and also attempts to identify and prepend <code>https://</code> to schemeless domains (e.g., <code>example.com</code> becomes <code>https://example.com</code>).</li>
<li>For <code>.csv</code> files, URLs are expected to be in the first column and should be fully qualified (e.g., <code>http://example.com</code>). Schemeless domains from CSVs are currently skipped.</li>
<li>For <code>.json</code> files, all string values are recursively scanned. Fully qualified URLs are extracted. If a malformed JSON file is encountered, a fallback regex scan of the raw content is performed.</li>
<li>Entries in input sources that are malformed (e.g., <code>htp://missing-t.com</code>) or use unsupported schemes (e.g., <code>ftp://</code>) are generally skipped.</li>
</ul>
<a id="md:statsgenerate-command" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><code>stats:generate</code> Command<a href="#md:statsgenerate-command" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>The <code>stats:generate</code> command processes stored website scan data (typically found in the <code>./store</code> directory, generated by the <code>scan</code> command) to generate or update the <code>api/api.json</code> file. This JSON file contains aggregated statistics about Prebid.js usage, including version distributions and module usage, after cleaning and categorization.</p>
<p><strong>Syntax:</strong></p>
<pre><code class="bash"><span class="hl-0">./bin/run</span><span class="hl-1"> </span><span class="hl-2">stats:generate</span><br/><span class="hl-4"># or in development: node ./bin/dev.js stats:generate</span><br/><span class="hl-4"># or using npm script (if configured): npm run prebid:stats:generate</span>
</code><button type="button">Copy</button></pre>

<p><strong>Flags:</strong></p>
<p>This command currently does not take any specific flags.</p>
<p><strong>Usage Example:</strong></p>
<ol>
<li><strong>Generate or update the statistics API file:</strong><pre><code class="bash"><span class="hl-0">./bin/run</span><span class="hl-1"> </span><span class="hl-2">stats:generate</span>
</code><button type="button">Copy</button></pre>

<em>(Ensure <code>./bin/run</code> has execute permissions or use <code>node ./bin/run stats:generate</code>)</em></li>
</ol>
<a id="md:running-tests" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Running Tests<a href="#md:running-tests" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>To run the test suite using Vitest:</p>
<pre><code class="bash"><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">test</span>
</code><button type="button">Copy</button></pre>

<p><strong>Note on <code>vitest</code> execution:</strong> In some environments, if <code>vitest</code> is not found via the npm script, you might need to run it using <code>npx</code>:</p>
<pre><code class="bash"><span class="hl-0">npx</span><span class="hl-1"> </span><span class="hl-3">-p</span><span class="hl-1"> </span><span class="hl-2">vitest</span><span class="hl-1"> </span><span class="hl-2">vitest</span><span class="hl-1"> </span><span class="hl-2">run</span>
</code><button type="button">Copy</button></pre>

<p>This will execute all tests found in the <code>tests/</code> directory.</p>
<a id="md:logging" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Logging<a href="#md:logging" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>This application utilizes the Winston logging library to provide detailed and structured logging.</p>
<a id="md:log-files" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Log Files<a href="#md:log-files" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Log files are stored in the <code>logs/</code> directory, which is excluded from Git commits via <code>.gitignore</code>.</p>
<ul>
<li><strong><code>logs/app.log</code></strong>: This file contains all general application logs, including informational messages, warnings, and errors (typically <code>info</code> level and above). Log entries are stored in JSON format, allowing for easy parsing and querying. Each entry includes a timestamp, log level, message, and any additional metadata.</li>
<li><strong><code>logs/error.log</code></strong>: This file is dedicated to error-level logs only. It provides a focused view of errors that have occurred within the application, also in JSON format. Error logs will include stack traces when available.</li>
</ul>
<a id="md:console-output" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Console Output<a href="#md:console-output" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>In addition to file logging, messages are also output to the console:</p>
<ul>
<li>Log messages are colorized for better readability based on their severity level (e.g., errors in red, warnings in yellow).</li>
<li>The console typically displays <code>info</code> level messages and above.</li>
<li>The format includes the timestamp, log level, and message, similar to the file logs.</li>
</ul>
<a id="md:log-format" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Log Format<a href="#md:log-format" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>All log entries, whether in files or on the console, follow a consistent format:</p>
<ul>
<li><strong>Timestamp</strong>: <code>YYYY-MM-DD HH:mm:ss</code></li>
<li><strong>Level</strong>: The severity of the log (e.g., <code>info</code>, <code>warn</code>, <code>error</code>).</li>
<li><strong>Message</strong>: The main content of the log entry.</li>
<li><strong>Stack Trace</strong>: For error logs, a stack trace is included if available, aiding in debugging.</li>
</ul>
<a id="md:opentelemetry-integration" class="tsd-anchor"></a><h2 class="tsd-anchor-link">OpenTelemetry Integration<a href="#md:opentelemetry-integration" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>OpenTelemetry has been integrated to provide distributed tracing capabilities.</p>
<ul>
<li>The main tracer configuration can be found in <code>src/tracer.ts</code>.</li>
<li>Log messages (both console and file) are now automatically enriched with <code>trace_id</code> and <code>span_id</code> when generated within an active trace.</li>
<li>The default OTLP HTTP exporter is used. You may need to configure the <code>OTEL_EXPORTER_OTLP_ENDPOINT</code> environment variable to point to your OpenTelemetry collector (e.g., <code>http://localhost:4318/v1/traces</code>).</li>
<li>The service name for OpenTelemetry is configured via the <code>OTEL_SERVICE_NAME</code> environment variable (e.g., <code>export OTEL_SERVICE_NAME=&quot;prebid-integration-monitor&quot;</code>). An attempt to set this directly in <code>src/tracer.ts</code> using the <code>Resource</code> attribute resulted in a TypeScript build error (TS2693) due to OpenTelemetry package version incompatibilities, so it remains commented out.</li>
</ul>
</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="assets/icons.svg#icon-chevronDown"></use></svg>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="assets/icons.svg#icon-chevronDown"></use></svg>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#md:prebid-integration-monitor"><span>prebid-<wbr/>integration-<wbr/>monitor</span></a><ul><li><a href="#md:prerequisites"><span>Prerequisites</span></a></li><li><a href="#md:setup"><span>Setup</span></a></li><li><a href="#md:project-structure"><span>Project <wbr/>Structure</span></a></li><li><a href="#md:development"><span>Development</span></a></li><li><a href="#md:building-for-production"><span>Building for <wbr/>Production</span></a></li><li><a href="#md:running-in-production"><span>Running in <wbr/>Production</span></a></li><li><a href="#md:cli-usage-oclif"><span>CLI <wbr/>Usage (oclif)</span></a></li><li><ul><li><a href="#md:scan-command"><span>scan <wbr/>Command</span></a></li><li><ul><li><a href="#md:notes-on-url-extraction"><span>Notes on URL <wbr/>Extraction</span></a></li></ul></li><li><a href="#md:statsgenerate-command"><span>stats:generate <wbr/>Command</span></a></li></ul></li><li><a href="#md:running-tests"><span>Running <wbr/>Tests</span></a></li><li><a href="#md:logging"><span>Logging</span></a></li><li><ul><li><a href="#md:log-files"><span>Log <wbr/>Files</span></a></li><li><a href="#md:console-output"><span>Console <wbr/>Output</span></a></li><li><a href="#md:log-format"><span>Log <wbr/>Format</span></a></li></ul></li><li><a href="#md:opentelemetry-integration"><span>Open<wbr/>Telemetry <wbr/>Integration</span></a></li></ul></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="modules.html" class="current"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="assets/icons.svg#icon-1"></use></svg><span>prebid-integration-monitor</span></a><ul class="tsd-small-nested-navigation" id="tsd-nav-container" data-base="."><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>
